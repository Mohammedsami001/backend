<%- include('partials/header') %>

<div class="fade-in">
    <div class="card" style="max-width: 800px; margin: 0 auto;">
        <h2><i class="fas fa-edit"></i> Edit Blog Post</h2>
        <p class="text-muted mb-3">Update your post content and make it even better</p>
        
        <form id="editForm" data-post-id="<%= post.id %>" class="post-form">
            <div class="form-group">
                <label for="title">
                    <i class="fas fa-heading"></i> Post Title *
                </label>
                <input 
                    type="text" 
                    id="title" 
                    name="title" 
                    class="form-control" 
                    placeholder="Enter an engaging title for your post..."
                    required
                    maxlength="100"
                    value="<%= post.title %>"
                >
                <small class="text-muted">Maximum 100 characters</small>
            </div>
            
            <div class="form-group">
                <label for="author">
                    <i class="fas fa-user"></i> Author Name
                </label>
                <input 
                    type="text" 
                    id="author" 
                    name="author" 
                    class="form-control" 
                    placeholder="Your name (optional)"
                    maxlength="50"
                    value="<%= post.author %>"
                >
                <small class="text-muted">Leave blank to post as Anonymous</small>
            </div>
            
            <div class="form-group">
                <label for="content">
                    <i class="fas fa-pen"></i> Post Content *
                </label>
                <textarea 
                    id="content" 
                    name="content" 
                    class="form-control" 
                    rows="10"
                    placeholder="Write your blog post content here..."
                    required
                    style="min-height: 200px;"
                ><%= post.content %></textarea>
                <small class="text-muted">
                    <i class="fas fa-info-circle"></i>
                    Original post created: <%= new Date(post.createdAt).toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    }) %>
                </small>
            </div>
            
            <div class="form-actions" style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem; flex-wrap: wrap;">
                <a href="/posts/<%= post.id %>" class="btn btn-secondary">
                    <i class="fas fa-times"></i> Cancel
                </a>
                <a href="/" class="btn btn-outline" style="color: #6c757d; border-color: #6c757d;">
                    <i class="fas fa-home"></i> Back to Home
                </a>
                <button type="submit" class="btn btn-success">
                    <i class="fas fa-save"></i> Update Post
                </button>
            </div>
        </form>
    </div>
    
    <!-- Post Preview -->
    <div class="card" style="max-width: 800px; margin: 2rem auto 0;">
        <h3><i class="fas fa-eye"></i> Current Post Preview</h3>
        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-top: 1rem;">
            <h4 style="color: #2c3e50; margin-bottom: 0.5rem;"><%= post.title %></h4>
            <div class="post-meta mb-2">
                <span><i class="fas fa-user"></i> <%= post.author %></span>
                <span><i class="fas fa-calendar"></i> 
                    <%= new Date(post.createdAt).toLocaleDateString('en-US', {
                        month: 'short',
                        day: 'numeric',
                        year: 'numeric'
                    }) %>
                </span>
                <% if (post.updatedAt && post.updatedAt.getTime() !== post.createdAt.getTime()) { %>
                    <span><i class="fas fa-edit"></i> Updated</span>
                <% } %>
            </div>
            <div class="text-muted" style="line-height: 1.6;">
                <% 
                    const preview = post.content.length > 150 
                        ? post.content.substring(0, 150) + '...' 
                        : post.content;
                %>
                <%= preview %>
            </div>
        </div>
    </div>
    
    <!-- Edit Tips -->
    <div class="card" style="max-width: 800px; margin: 1rem auto 0;">
        <h3><i class="fas fa-lightbulb"></i> Editing Tips</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
            <div>
                <h4><i class="fas fa-search"></i> Review Content</h4>
                <p class="text-muted">Read through your post for clarity and flow.</p>
            </div>
            <div>
                <h4><i class="fas fa-spell-check"></i> Check Grammar</h4>
                <p class="text-muted">Look for spelling mistakes and grammatical errors.</p>
            </div>
            <div>
                <h4><i class="fas fa-plus-circle"></i> Add Details</h4>
                <p class="text-muted">Consider adding more examples or explanations.</p>
            </div>
            <div>
                <h4><i class="fas fa-cut"></i> Trim Fat</h4>
                <p class="text-muted">Remove unnecessary words for better readability.</p>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>