<%- include('partials/header') %>

<div class="fade-in">
    <% if (posts.length === 0) { %>
        <div class="empty-state">
            <i class="fas fa-pen-fancy" style="font-size: 4rem; color: #667eea; margin-bottom: 1rem;"></i>
            <h3>No posts yet!</h3>
            <p>Start sharing your thoughts by creating your first blog post.</p>
            <a href="/create" class="btn btn-primary mt-3">
                <i class="fas fa-plus"></i> Create Your First Post
            </a>
        </div>
    <% } else { %>
        <div class="text-center mb-3">
            <h2><i class="fas fa-newspaper"></i> Latest Blog Posts</h2>
            <p class="text-muted">Discover thoughts, ideas, and stories shared by our community</p>
        </div>
        
        <div class="posts-grid">
            <% posts.forEach((post, index) => { %>
                <article class="card" data-index="<%= index %>">
                    <header>
                        <h3>
                            <a href="/posts/<%= post.id %>" style="text-decoration: none; color: inherit;">
                                <%= post.title %>
                            </a>
                        </h3>
                        <div class="post-meta">
                            <span>
                                <i class="fas fa-user"></i>
                                <%= post.author %>
                            </span>
                            <span>
                                <i class="fas fa-calendar"></i>
                                <%= new Date(post.createdAt).toLocaleDateString('en-US', {
                                    year: 'numeric',
                                    month: 'long',
                                    day: 'numeric'
                                }) %>
                            </span>
                            <span>
                                <i class="fas fa-clock"></i>
                                <%= new Date(post.createdAt).toLocaleTimeString('en-US', {
                                    hour: '2-digit',
                                    minute: '2-digit'
                                }) %>
                            </span>
                            <% if (post.updatedAt && post.updatedAt.getTime() !== post.createdAt.getTime()) { %>
                                <span>
                                    <i class="fas fa-edit"></i>
                                    Updated: <%= new Date(post.updatedAt).toLocaleDateString('en-US', {
                                        month: 'short',
                                        day: 'numeric'
                                    }) %>
                                </span>
                            <% } %>
                        </div>
                    </header>
                    
                    <div class="post-preview">
                        <% 
                            const preview = post.content.length > 200 
                                ? post.content.substring(0, 200) + '...' 
                                : post.content;
                        %>
                        <%= preview %>
                    </div>
                    
                    <div class="post-actions">
                        <a href="/posts/<%= post.id %>" class="btn btn-primary btn-small">
                            <i class="fas fa-eye"></i> Read More
                        </a>
                        <a href="/posts/<%= post.id %>/edit" class="btn btn-secondary btn-small">
                            <i class="fas fa-edit"></i> Edit
                        </a>
                        <button class="btn btn-danger btn-small" 
                                data-action="delete" 
                                data-post-id="<%= post.id %>">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </article>
            <% }) %>
        </div>
        
        <div class="text-center mt-3">
            <p class="text-muted">
                <i class="fas fa-info-circle"></i>
                Showing <%= posts.length %> post<%= posts.length !== 1 ? 's' : '' %>
            </p>
        </div>
    <% } %>
</div>

<%- include('partials/footer') %>