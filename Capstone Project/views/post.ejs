<%- include('partials/header') %>

<div class="fade-in">
    <article class="card" style="max-width: 900px; margin: 0 auto;">
        <header class="post-header" style="border-bottom: 2px solid #f8f9fa; padding-bottom: 1.5rem; margin-bottom: 2rem;">
            <h1 style="color: #2c3e50; font-size: 2.5rem; margin-bottom: 1rem; line-height: 1.2;">
                <%= post.title %>
            </h1>
            
            <div class="post-meta" style="font-size: 1rem;">
                <span>
                    <i class="fas fa-user"></i>
                    <strong><%= post.author %></strong>
                </span>
                <span>
                    <i class="fas fa-calendar"></i>
                    <%= new Date(post.createdAt).toLocaleDateString('en-US', {
                        weekday: 'long',
                        year: 'numeric',
                        month: 'long',
                        day: 'numeric'
                    }) %>
                </span>
                <span>
                    <i class="fas fa-clock"></i>
                    <%= new Date(post.createdAt).toLocaleTimeString('en-US', {
                        hour: '2-digit',
                        minute: '2-digit'
                    }) %>
                </span>
                <% if (post.updatedAt && post.updatedAt.getTime() !== post.createdAt.getTime()) { %>
                    <span style="color: #28a745;">
                        <i class="fas fa-edit"></i>
                        Last updated: <%= new Date(post.updatedAt).toLocaleDateString('en-US', {
                            month: 'long',
                            day: 'numeric',
                            hour: '2-digit',
                            minute: '2-digit'
                        }) %>
                    </span>
                <% } %>
            </div>
        </header>
        
        <div class="post-content" style="font-size: 1.1rem; line-height: 1.8; color: #2c3e50;">
            <% 
                // Simple line break formatting
                const formattedContent = post.content
                    .split('\n')
                    .map(paragraph => paragraph.trim())
                    .filter(paragraph => paragraph.length > 0)
                    .map(paragraph => `<p>${paragraph}</p>`)
                    .join('');
            %>
            <%- formattedContent %>
        </div>
        
        <footer class="post-footer" style="border-top: 2px solid #f8f9fa; padding-top: 1.5rem; margin-top: 2rem;">
            <div class="post-actions">
                <a href="/posts/<%= post.id %>/edit" class="btn btn-secondary">
                    <i class="fas fa-edit"></i> Edit Post
                </a>
                <button class="btn btn-danger" 
                        data-action="delete" 
                        data-post-id="<%= post.id %>">
                    <i class="fas fa-trash"></i> Delete Post
                </button>
                <a href="/" class="btn btn-primary">
                    <i class="fas fa-arrow-left"></i> Back to All Posts
                </a>
            </div>
        </footer>
    </article>
    
    <!-- Reading Stats -->
    <div class="card text-center" style="max-width: 900px; margin: 1rem auto 0;">
        <div style="display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 1rem;">
            <div>
                <i class="fas fa-book-open" style="font-size: 1.5rem; color: #667eea;"></i>
                <div>
                    <strong>
                        <%= Math.ceil(post.content.split(' ').length / 200) %> min
                    </strong>
                    <div class="text-muted">Reading Time</div>
                </div>
            </div>
            <div>
                <i class="fas fa-align-left" style="font-size: 1.5rem; color: #28a745;"></i>
                <div>
                    <strong><%= post.content.split(' ').length %></strong>
                    <div class="text-muted">Words</div>
                </div>
            </div>
            <div>
                <i class="fas fa-paragraph" style="font-size: 1.5rem; color: #fd7e14;"></i>
                <div>
                    <strong><%= post.content.length %></strong>
                    <div class="text-muted">Characters</div>
                </div>
            </div>
            <div>
                <i class="fas fa-list" style="font-size: 1.5rem; color: #6f42c1;"></i>
                <div>
                    <strong>
                        <%= post.content.split('\n').filter(p => p.trim().length > 0).length %>
                    </strong>
                    <div class="text-muted">Paragraphs</div>
                </div>
            </div>
        </div>
    </div>
</div>

<%- include('partials/footer') %>